import{d as I,R as ee,C as k,l as v,v as ne,z as oe,r as l,o as C,a as S,i as g,g as e,w as n,h as c,t as b,e as $,F as E,b as te,n as ae,s as ie}from"./index-e263fa8e.js";const le="4003443",ce="wangwang",de="iconfont",se="icon-",ue="旺旺后台项目",_e=[{icon_id:"608274",name:"地图",font_class:"ditumap29",unicode:"e67a",unicode_decimal:59002},{icon_id:"1263261",name:"申请",font_class:"shenqing",unicode:"e60b",unicode_decimal:58891},{icon_id:"1506290",name:"今日待办",font_class:"jinridaiban",unicode:"e60f",unicode_decimal:58895},{icon_id:"3876829",name:"13 AI 实验室",font_class:"AIshiyanshi",unicode:"e60c",unicode_decimal:58892},{icon_id:"13277401",name:"数字（滚动）",font_class:"shuzigundong",unicode:"e60a",unicode_decimal:58890},{icon_id:"8084578",name:"页面操作",font_class:"yemiancaozuo",unicode:"e61a",unicode_decimal:58906},{icon_id:"8288983",name:"功能",font_class:"gongneng",unicode:"e867",unicode_decimal:59495},{icon_id:"8329621",name:"数据",font_class:"shuju",unicode:"e6db",unicode_decimal:59099},{icon_id:"11079327",name:"可视化",font_class:"keshihuakanban",unicode:"e711",unicode_decimal:59153},{icon_id:"35691125",name:"通知-copy",font_class:"tongzhi-copy",unicode:"e889",unicode_decimal:59529},{icon_id:"35691136",name:"皮肤-copy",font_class:"pifu-copy",unicode:"e88a",unicode_decimal:59530},{icon_id:"35691142",name:"字体-copy",font_class:"ziti-copy",unicode:"e88b",unicode_decimal:59531},{icon_id:"35691176",name:"搜索-copy",font_class:"sousuo-copy",unicode:"e88c",unicode_decimal:59532},{icon_id:"91363",name:"大图模式",font_class:"datumoshi",unicode:"e667",unicode_decimal:58983},{icon_id:"577700",name:"字典",font_class:"zidian",unicode:"e679",unicode_decimal:59001},{icon_id:"658956",name:"图片",font_class:"tupian",unicode:"e67f",unicode_decimal:59007},{icon_id:"954148",name:"地图",font_class:"ditu",unicode:"e620",unicode_decimal:58912},{icon_id:"1137788",name:"系统",font_class:"xitong",unicode:"e67c",unicode_decimal:59004},{icon_id:"1194580",name:"角色",font_class:"jiaose",unicode:"e64d",unicode_decimal:58957},{icon_id:"2076215",name:"音量",font_class:"yinliang",unicode:"e87a",unicode_decimal:59514},{icon_id:"2076240",name:" 筛选",font_class:"shaixuan",unicode:"e888",unicode_decimal:59528},{icon_id:"4640798",name:"首页",font_class:"shouye",unicode:"e603",unicode_decimal:58883},{icon_id:"5121503",name:"权限",font_class:"quanxian",unicode:"e642",unicode_decimal:58946},{icon_id:"6540388",name:"搜索",font_class:"sousuo",unicode:"e607",unicode_decimal:58887},{icon_id:"6996235",name:"组织",font_class:"zuzhi",unicode:"e712",unicode_decimal:59154},{icon_id:"7533298",name:"表格",font_class:"biaoge",unicode:"e606",unicode_decimal:58886},{icon_id:"7638975",name:"通知",font_class:"tongzhi",unicode:"e615",unicode_decimal:58901},{icon_id:"7738015",name:"用户",font_class:"yonghu",unicode:"e608",unicode_decimal:58888},{icon_id:"8765149",name:"皮肤",font_class:"pifu",unicode:"e62b",unicode_decimal:58923},{icon_id:"9384062",name:"菜单",font_class:"caidan",unicode:"e609",unicode_decimal:58889},{icon_id:"10110717",name:"列表形式",font_class:"liebiaoxingshi",unicode:"e613",unicode_decimal:58899},{icon_id:"11179876",name:"字体",font_class:"ziti",unicode:"e604",unicode_decimal:58884},{icon_id:"11831146",name:"水杯",font_class:"shuibei",unicode:"e732",unicode_decimal:59186},{icon_id:"12078142",name:"瀑布流",font_class:"pubuliu",unicode:"e6b7",unicode_decimal:59063},{icon_id:"15858649",name:"水滴",font_class:"di",unicode:"e610",unicode_decimal:58896},{icon_id:"17722244",name:"吉他",font_class:"ziyuan9",unicode:"e614",unicode_decimal:58900},{icon_id:"6851521",name:"操作",font_class:"caozuo",unicode:"e6d7",unicode_decimal:59095},{icon_id:"6246309",name:"组件",font_class:"zujian",unicode:"e652",unicode_decimal:58962},{icon_id:"12321001",name:"页面",font_class:"yemian",unicode:"e622",unicode_decimal:58914},{icon_id:"12331649",name:"表单",font_class:"biaodan",unicode:"e663",unicode_decimal:58979}],me={id:le,name:ce,font_family:de,css_prefix_text:se,description:ue,glyphs:_e},re={class:"menus"},fe={class:"sercarINput"},pe={class:"my-dropdown4"},ve={class:"scrolbar"},ge=["onClick"],ye=I({name:"roles"}),be=I({...ye,setup(he){const z=ee(),T=k({filterName:""}),f=k({MenusRouterList:[],Tips:"新增菜单"}),R=v(),U=v();ne(()=>{const i=U.value,a=R.value;i&&a&&i.connect(a)});const P=i=>{let a=JSON.parse(JSON.stringify(i));function u(s){let y=[];return s.forEach(d=>{d.label=d.meta.title,d.children&&d.children.length>0&&u(d.children),y.push(d)}),y}return u(a)},w=()=>{r.value=!0,f.Tips="新增菜单"};v();function N(i){return`iconfont icon-${i.font_class}`}const t=k({ParentPath:"",path:"",name:"",component:"",title:"",roles:[],icon:"",sort:1,redirect:"",type:""}),j=i=>{t.path=i.path,t.name=i.name.toString(),t.component=i.component+"",t.title=i.meta.title.toString(),t.roles=[i.meta.roles].flat(),t.icon=i.meta.icon.toString(),t.sort=parseInt(i.meta.sort.toString()),i.redirect&&(t.redirect=i.redirect.toString()),t.type=i.meta.type.toString(),r.value=!0,f.Tips="编辑菜单"},p=v(!1),A=()=>{p.value=!0,r.value=!1,setTimeout(()=>{h()},100)},r=v(!1),h=()=>{p.value=!1,f.MenusRouterList=z.routesList??[]},B=()=>{r.value=!1;for(const i in t)t[i]="";t.roles=[],t.sort=1};oe(()=>{x()});const x=()=>{p.value=!0,setTimeout(()=>{h()},100)},O=i=>{p.value=!0,setTimeout(()=>{h()},1e3)};return(i,a)=>{const u=l("a-input"),s=l("a-button"),y=l("vxe-toolbar"),d=l("vxe-column"),q=l("a-tag"),D=l("a-popconfirm"),F=l("vxe-table"),H=l("a-spin"),J=l("a-tree-select"),_=l("a-form-item"),m=l("a-col"),K=l("a-popover"),L=l("a-radio"),G=l("a-radio-group"),M=l("a-select-option"),Q=l("a-select"),W=l("a-input-number"),X=l("a-row"),Y=l("a-form"),Z=l("a-modal");return C(),S(E,null,[g("div",re,[e(y,{ref_key:"xTree",ref:R},{buttons:n(()=>[g("div",fe,[e(u,{value:T.filterName,"onUpdate:value":a[0]||(a[0]=o=>T.filterName=o),type:"search",placeholder:"请输入菜单名称，搜索",onKeyup:x},null,8,["value"]),e(s,{type:"primary",ghost:"",onClick:x},{default:n(()=>[c("查询")]),_:1}),e(s,{type:"primary",onClick:w},{default:n(()=>[c("新增菜单")]),_:1})])]),_:1},512),e(H,{spinning:p.value},{default:n(()=>[e(F,{border:"none",ref_key:"xTable1",ref:U,"show-header-overflow":"","show-overflow":"","row-config":{isHover:!0},align:"left","max-height":"1000","tree-config":{},data:f.MenusRouterList},{default:n(()=>[e(d,{field:"name",title:"菜单名称","tree-node":""},{default:n(({row:o})=>[c(b(o.meta.title),1)]),_:1}),e(d,{field:"path",title:"路由",width:"15%"}),e(d,{field:"component",title:"组件路径"}),e(d,{field:"roles",title:"权限"},{default:n(({row:o})=>[c(b(o.meta.roles.toString()),1)]),_:1}),e(d,{field:"sort",title:"排序"},{default:n(({row:o})=>[c(b(o.meta.sort.toString()),1)]),_:1}),e(d,{field:"type",title:"类型"},{default:n(({row:o})=>[e(q,{title:o.meta.type,color:"green"},{default:n(()=>[c(b(o.meta.type),1)]),_:2},1032,["title"])]),_:1}),e(d,{field:"",title:"操作",width:"220"},{default:n(({row:o})=>[e(s,{type:"link",onClick:w},{default:n(()=>[c("新增")]),_:1}),e(s,{type:"link",onClick:V=>j(o)},{default:n(()=>[c("修改")]),_:2},1032,["onClick"]),e(D,{title:"你确认要删除这条数据吗 ?",onConfirm:V=>O(o),"ok-text":"确认","cancel-text":"取消"},{default:n(()=>[e(s,{type:"link"},{default:n(()=>[c("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),_:1},8,["spinning"])]),e(Z,{open:r.value,"onUpdate:open":a[10]||(a[10]=o=>r.value=o),title:f.Tips,afterClose:B,draggable:""},{footer:n(()=>[e(s,{onClick:a[9]||(a[9]=o=>r.value=!1)},{default:n(()=>[c("取消")]),_:1}),e(s,{type:"primary",onClick:A},{default:n(()=>[c(" 保存 ")]),_:1})]),default:n(()=>[e(Y,{model:t},{default:n(()=>[e(X,{gutter:20},{default:n(()=>[e(m,{span:24,offset:0},{default:n(()=>[e(_,{label:"上级菜单"},{default:n(()=>[e(J,{value:t.ParentPath,"onUpdate:value":a[1]||(a[1]=o=>t.ParentPath=o),style:{width:"100%"},"field-names":{label:"label",value:"path",children:"children",key:"path"},"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"","allow-clear":"","tree-default-expand-all":"","tree-data":P($(z).routesList)},null,8,["value","tree-data"])]),_:1})]),_:1}),e(m,{span:12,offset:0},{default:n(()=>[e(_,{label:"菜单名称"},{default:n(()=>[e(u,{value:t.title,"onUpdate:value":a[2]||(a[2]=o=>t.title=o)},null,8,["value"])]),_:1})]),_:1}),e(m,{span:12,offset:0},{default:n(()=>[e(_,{label:"路由名称"},{default:n(()=>[e(u,{value:t.name,"onUpdate:value":a[3]||(a[3]=o=>t.name=o)},null,8,["value"])]),_:1})]),_:1}),e(m,{span:12,offset:0},{default:n(()=>[e(_,{label:"菜单图标"},{default:n(()=>[e(K,{placement:"bottom",width:400,trigger:"click"},{content:n(()=>[g("div",pe,[g("div",ve,[(C(!0),S(E,null,te($(me).glyphs,o=>(C(),S("div",{onClick:V=>t.icon=N(o),key:o.icon_id,class:"iocnntn"},[g("i",{class:ae(N(o))},null,2)],8,ge))),128))])])]),default:n(()=>[e(u,{value:t.icon,"onUpdate:value":a[4]||(a[4]=o=>t.icon=o)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(m,{span:12,offset:0},{default:n(()=>[e(_,{label:"重定向"},{default:n(()=>[e(u,{modelValue:t.redirect,"onUpdate:modelValue":a[5]||(a[5]=o=>t.redirect=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{span:12,offset:0},{default:n(()=>[e(_,{label:"类型"},{default:n(()=>[e(G,{value:t.type,"onUpdate:value":a[6]||(a[6]=o=>t.type=o)},{default:n(()=>[e(L,{value:"菜单"},{default:n(()=>[c("菜单")]),_:1}),e(L,{value:"按钮"},{default:n(()=>[c("按钮")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(m,{span:12,offset:0},{default:n(()=>[e(_,{label:"菜单权限"},{default:n(()=>[e(Q,{value:t.roles,"onUpdate:value":a[7]||(a[7]=o=>t.roles=o),"value-key":"",placeholder:"请选择",clearable:"",filterable:"",multiple:""},{default:n(()=>[e(M,{value:"admin"},{default:n(()=>[c("admin ")]),_:1}),e(M,{value:"common"},{default:n(()=>[c("common ")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),e(m,{span:12,offset:0},{default:n(()=>[e(_,{label:"排序"},{default:n(()=>[e(W,{value:t.sort,"onUpdate:value":a[8]||(a[8]=o=>t.sort=o),min:1,max:10},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])],64)}}});const ke=ie(be,[["__scopeId","data-v-fad377f8"]]);export{ke as default};
